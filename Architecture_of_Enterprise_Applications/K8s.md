# Kubernetes

+ 容器的迁移、对挂掉的容器的处理对用户而言是不可见的。就好像注册到eureka一样自动管理。

+ 可以写一个资源配置文件，让某个物理机上的资源得到充分利用。
+ 自愈：挂掉的容器能够再起一个容器重新挂载。

![部署演进](imgs/container_evolution.svg)

![Kubernetes 组件](imgs/components-of-kubernetes.svg)

+ Control Plane
  + 最好保证控制面上的服务都在一台物理机或者靠近的物理机上。不建议控制面控件和容器的物理机混用。
+ Scheduler
  + 分配、调度请求；通常跑多个实例。
+ etcd
  + 存储监控数据(节点的状态)；根据节点的状态决定把容器部署到哪台物理机上。
  + 存储各类数据，用户名，密码。

+ 每个节点都需要装两个东西：
  + kubelet：收集节点信息；
  + k-proxy：代理，让节点之间能够通信；

+ Pod

  + 最小可部署单元；

  + 在Kubernetes集群中，Pod是所有业务类型的基础，也是K8S管理的最小单位级，它是一个或多个容器的组合。这些容器共享存储、网络和命名空间，以及如何运行的规范。在Pod中，所有容器都被同一安排和调度，并运行在共享的上下文中。对于具体应用而言，Pod是它们的逻辑主机，Pod包含业务相关的多个应用容器。

+ 和一个网关一样，暴露控制面给用户，屏蔽了k8s对容器的管控。用户没法直接获得某个容器的IP（否则如果这个容器坏了这么办，这涉及到容器的迁移）
+ k8s开源，可以更换组件。

